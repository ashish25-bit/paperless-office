<!doctype html>
<html>

<body>
    <style type="text/css">
        #edt {
            padding: 2px;
            width: 100%;
            height: 500px;
            border: 1px solid black;
            overflow: scroll;
        }
    </style>
    <img src="./public/uploads/download.png">
    <input type="checkbox" onchange="setDocMode(this.checked);" />Show HTML source
    <div id="edt" contenteditable="true">
        <img src="./public/uploads/download.png">
    </div>
</body>

<script type="text/javascript">
    let edt = document.getElementById("edt");
    function setDocMode(bToSource) {
        let oContent;
        if (bToSource) {
            oContent = document.createTextNode(edt.innerHTML);
            edt.innerHTML = "";
            edt.contentEditable = false;
            let oPre = document.createElement("pre");

            oPre.id = "sourceView";
            oPre.contentEditable = true;
            oPre.appendChild(oContent);
            edt.appendChild(oPre);
            document.execCommand("defaultParagraphSeparator", false, "div");
        } else {
            if (document.all) {
                edt.innerHTML = edt.innerText;
            } else {
                oContent = document.createRange();
                oContent.selectNodeContents(edt.firstChild);
                edt.innerHTML = oContent.toString();
            }
            edt.contentEditable = true;
        }
        edt.focus();
    }

    document.getElementById('edt').addEventListener("paste", (event) => {
        var clipboardData = event.clipboardData;
        clipboardData.types.forEach((type, i) => {
            const fileType = clipboardData.items[i].type;
            if (fileType.match(/image.*/)) {
                const file = clipboardData.items[i].getAsFile();
                const reader = new FileReader();
                reader.onload = function (evt) {
                    const dataURL = evt.target.result;
                    const img = document.createElement("img");
                    img.src = dataURL;
                    document.execCommand('insertHTML', true, img.outerHTML);
                };
                reader.readAsDataURL(file);
            }
        });
    });

</script>

</html>